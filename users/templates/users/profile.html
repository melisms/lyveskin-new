{% extends 'lyve/base.html' %}
{% load crispy_forms_tags %}

{% block content %}

<style>
    .custom-settings-button {
        background-color: #40826D;
        border-radius: 10px;
        padding: 6px 16px;
        width: 90px;
        transition: background-color 0.3s ease-in-out;
    }

    .custom-settings-button:hover {
        background-color: #1e3b31;
    }


    .profile-label {
    font-weight: 600;
    color: #6b7280; /* Tailwind: text-gray-500 */
    text-transform: uppercase;
    font-size: 0.85rem;
}
.profile-info {
    font-size: 1.1rem;
    font-weight: 500;
    margin-bottom: 10px;
}
.hidden {
  display: none;
}


</style>

<div class="container mx-auto p-8 flex flex-col items-center">
    <h1 class="text-3xl font-bold mb-8 text-center">
  Welcome
  {% if user_profile.user.first_name or user_profile.user.last_name %}
    {{ user_profile.user.first_name|capfirst }} {{ user_profile.user.last_name|capfirst }}
  {% else %}
    {{ user_profile.user.username|capfirst }}
  {% endif %}
</h1>



    <!-- Profile Picture -->
    <div class="relative -mt-20 mb-6">
        <img
  id="profileImage"
  src="{% if user_profile.profile_picture %}{{ user_profile.profile_picture.url }}{% else %}https://via.placeholder.com/150{% endif %}"
  alt="{{ user_profile.user.username }}'s profile picture"
  class="mr-3 rounded-circle"
  style="width: 150px; height: 150px; object-fit: cover;"/>
<br><br><br>

    </div>
    <!-- My Routine Button -->
<button onclick="toggleModal()" class="custom-settings-button text-white text-sm font-semibold py-2 px-4 rounded shadow mt-6">
  üß¥ My Routine
</button>

<!-- Modal -->
<div id="routineModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-md">
    <h2 class="text-xl font-bold mb-4 text-center">üßº My Routine</h2>
    {% if user_profile.favorites.all %}
      <ul class="space-y-2">
        {% for item in user_profile.favorites.all %}
          <li class="border p-2 rounded text-center">{{ item.name }}</li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="text-center text-gray-500">No items in your routine yet.</p>
    {% endif %}

    <div class="flex justify-center mt-6">
      <button onclick="toggleModal()" class="bg-red-600 text-white px-4 py-2 rounded">Close</button>
    </div>
  </div>
</div>


    <!-- User Info -->
    <div class=" mb-6">
        <p class="profile-info"><span class="profile-label">Name:</span> {{ user_profile.user.first_name|default:"-" }}</p>
        <p class="profile-info"><span class="profile-label">Surname:</span> {{ user_profile.user.last_name|default:"-" }}</p>
        <p class="profile-info"><span class="profile-label">Username:</span> {{ user_profile.user.username }}</p>
        <p class="profile-info"><span class="profile-label">Email:</span> {{ user_profile.user.email|default:"-" }}</p>
    </div>
<br><br><br><br><br>
    <!-- Settings -->
    {% if user_profile.user == request.user %}
    <div>
        <a href="{% url 'settings_page' %}" class="custom-settings-button text-white text-sm font-semibold py-2 px-4 rounded shadow">
  ‚öôÔ∏è Settings
        
</a>

    </div>
    {% endif %}
</div>

<script>
  function toggleModal() {
    const modal = document.getElementById("routineModal");
    modal.classList.toggle("hidden");
  }

  document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
      document.getElementById("routineModal").classList.add("hidden");
    }
  });

  window.addEventListener('click', function(event) {
    const modal = document.getElementById("routineModal");
    const modalContent = modal.querySelector('.modal-content');
    if (!modal.classList.contains("hidden") && !modalContent.contains(event.target)) {
      modal.classList.add("hidden");
    }
  });
</script>



{% endblock %}
